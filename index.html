<!DOCTYPE html>
<html lang="en">
<head>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="2d7a16f6-6624-418d-906b-62a92bc41bca"></script>  <meta charset="UTF-8" />

  <meta name="google-site-verification" content="qK4_9fj-_oQbk3XLWuUA937Uz-_O0nlkaY0OL_GaeYM" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Koodaram - A Decentralized Hostel Network</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

</head>

<body>

<header class="navbar">
  <div class="nav-container">
    <a href="/" class="logo"> üè† Koodaram</a>
    <nav id="main-nav">
      <a href="/">Home</a>
      <a href="/pages/browse.html">Browse Hostels</a>
      <a href="/pages/community.html">Community</a>
      <a href="/pages/listHostel.html">List Hostel</a>
      <a href="/pages/about.html">About</a>
      <a href="/pages/profile.html">Profile</a>
    </nav>
    <div class="nav-right">
        <a href="/pages/signup.html" class="nav-cta-button">Sign Up / Login</a>
        <button class="hamburger" id="hamburger-button">
          <span></span>
          <span></span>
          <span></span>
        </button>
    </div>
  </div>
</header>

<div class="hero">
  <h1>Your Campus, Your Hostels, Your Network.</h1>
  <p>A decentralized, student-run network for finding and verifying hostels. Powered by community, for the community.</p>
  <div style="margin-top: 1rem; display: flex; justify-content: center; gap: 1rem;">
    <a href="/pages/browse.html" class="cta-button">üîç Find Your Hostel</a>
    <a href="/pages/community.html" class="cta-button">üí¨ Join the Community</a>
  </div>
</div>

<section class="how-it-works-section">
    <h2>How It Works</h2>
    <div class="steps-container">
      <div class="step-card">
        <div class="step-number">1</div>
        <h3>Students Submit & Verify</h3>
        <p>Real students submit and verify hostel information, ensuring data is up-to-date and trustworthy.</p>
      </div>
      <div class="step-card">
        <div class="step-number">2</div>
        <h3>Community Governed</h3>
        <p>The community discusses and reviews hostels, creating a transparent and self-regulating ecosystem.</p>
      </div>
      <div class="step-card">
        <div class="step-number">3</div>
        <h3>Everyone Benefits</h3>
        <p>Access a free, open, and honest database of hostels, without corporate control or paywalls.</p>
      </div>
    </div>
</section>

<section class="community-highlight-section">
    <h2>From the Community</h2>
    <div id="community-posts-container" class="community-posts-container">
      <!-- Posts will be loaded here by JS -->
    </div>
</section>

<section class="faq-section">
  <h2>Frequently Asked Questions</h2>
  <div class="faq-accordion">
    <div class="faq-accordion-item">
      <div class="faq-accordion-question">Is Koodaram free to use?</div>
      <div class="faq-accordion-answer">
        <p>Yes! Koodaram is completely free (free as in freedom) for students. You can browse hostels, view photos, and contact owners without paying anything.</p>
      </div>
    </div>
    <div class="faq-accordion-item">
      <div class="faq-accordion-question">How do you ensure data is accurate?</div>
      <div class="faq-accordion-answer">
        <p>Our model is built on community verification. While we don't check every hostel personally, information is submitted and validated by a network of students. The community forums also play a big role in keeping information current.</p>
      </div>
    </div>
    <div class="faq-accordion-item">
      <div class="faq-accordion-question">How do I contribute?</div>
      <div class="faq-accordion-answer">
        <p>You can contribute by listing a new hostel, adding reviews and ratings, or participating in community discussions to verify information. Signed-in users have access to all community features.</p>
      </div>
    </div>
  </div>
</section>

<footer>
    <p>¬© 2025 Koodaram. A decentralized, student-run initiative. Made by <a href="https://github.com/rohankishore">Rohan Kishore</a></p>
</footer>

<script>
  const supabaseUrl = 'https://nggfsomxzrfojeszbqqq.supabase.co';
  const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5nZ2Zzb214enJmb2plc3picXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTM0NDksImV4cCI6MjA3NjcyOTQ0OX0.oWZ77VC3iuzi7r2tcI0sXGWwPgCQT-csrd2TdLJgimw';
  const { createClient } = supabase;
  const _supabase = createClient(supabaseUrl, supabaseAnonKey);

  // FAQ Accordion
  const faqItems = document.querySelectorAll('.faq-accordion-item');
  faqItems.forEach(item => {
    const question = item.querySelector('.faq-accordion-question');
    question.addEventListener('click', () => {
      item.classList.toggle('active');
    });
  });

  // Fetch Community Posts
  async function fetchCommunityPosts() {
    const postsContainer = document.getElementById('community-posts-container');
    const { data: posts, error } = await _supabase
      .from('community_posts')
      .select('*, profile:profiles(name)')
      .order('created_at', { ascending: false })
      .limit(3);

    if (posts) {
        postsContainer.innerHTML = '';
        posts.forEach(post => {
            const authorName = post.is_anonymous ? 'Anonymous' : (post.profile ? post.profile.name : 'Anonymous');
            const postCard = `
                <div class="community-post-card">
                    <p class="author">${authorName}</p>
                    <p class="hostel-info">${post.hostel} @ ${post.college}</p>
                    <p>${post.message.substring(0, 100)}...</p>
                </div>
            `;
            postsContainer.innerHTML += postCard;
        });
    }
  }

  // Hamburger Menu
  const hamburgerButton = document.getElementById('hamburger-button');
  const mainNav = document.getElementById('main-nav');
  function toggleMenu(e) {
    e.preventDefault();
    mainNav.classList.toggle('active');
  }
  hamburgerButton.addEventListener('click', toggleMenu);
  hamburgerButton.addEventListener('touchstart', toggleMenu);

  // Auth Logic
  (async () => {
    const { data: { user } } = await _supabase.auth.getUser();
    if (user) {
      if (window.location.pathname === '/' || window.location.pathname === '/index.html') {
        window.location.href = '/pages/profile.html';
      }
      document.querySelector('a[href="/pages/signup.html"]').style.display = 'none';
      document.querySelector('.logo').href = '/pages/profile.html';
    }
  })();

  // Initial data fetch
  fetchCommunityPosts();
</script>

</body>
</html>